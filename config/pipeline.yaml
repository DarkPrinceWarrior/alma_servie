paths:
  reports_dir: reports

anomalies:
  source_workbook: "./alma/Общая_таблица_новая.xlsx"
  svod_sheet: "svod"
  anomaly_causes:
    - "Негерметичность НКТ"
    - "Уменьшение Рпл / Кпрод"
    - "Уменьшение Рпл / Кпрод (приток)"
    - "Увеличение Рпл / Кпрод"
  normal_causes:
    - "Нормальная работа при изменении частоты"
  cause_profiles:
    - name: "Негерметичность НКТ"
      group: "Негерметичность НКТ"
      include_normal: true
    - name: "Уменьшение Рпл / Кпрод"
      group: "Приток"
      include_normal: false
    - name: "Уменьшение Рпл / Кпрод (приток)"
      group: "Приток"
      include_normal: false
    - name: "Увеличение Рпл / Кпрод"
      group: "Приток"
      include_normal: false
  holdout_wells:
    - "3261"
    - "495"
  input:
    mode: "excel"  # Переключите на "api", чтобы загружать данные по HTTP
    api:
      url: ""  # endpoint, который возвращает JSON с листами рабочей книги
      method: "GET"
      headers: {}
      params: {}
      timeout: 30
      sheets_key: "sheets"
      name_key: "name"
      records_key: "records"
      payload_path: []
  detection:
    window_minutes: 30
    shift_minutes: 15
    min_samples: 30
    delta_factor: 0.05
    threshold_clip_quantile: 0.55
    delta_quantile: 0.1
    slope_margin: 0.03
    slope_quantile: 0.15
    min_duration_minutes: 60
    gap_minutes: 10
  interpretation:
    strong_increase: 0.1
    mild_increase: 0.03
    mild_drop: -0.03
    strong_drop: -0.1
  calibration_percentiles:
    - 0.1
    - 0.5
    - 0.9
  preprocessing:
    hampel_window_minutes: 45
    hampel_n_sigma: 3.0
    ffill_limit_minutes: 30
  frequency_baseline:
    enabled: true
    bin_width_hz: 2.0
    min_points: 10
    metrics:
      - "Intake_Pressure"
      - "Current"
      - "Motor_Temperature"
  detection_residual:
    enabled: true
    ewma_lambda: 0.2
    ewma_l_multiplier: 3.0
    spike_threshold: 4.0
    t2_alpha: 0.001
    min_t2_points: 30

alignment:
  frequency: "15T"
  base_aggregation: "mean"
  pressure_fast_metrics:
    - "Intake_Pressure"
  agzu_max_ffill_hours: 24
  su_max_ffill_hours: 6
